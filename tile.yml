---
name: gcp-tools
label: 'Stackdriver Nozzle'
description: Import your Cloud Foundry logs into Stackdriver for top tier logging and monitoring
icon_file: gcp_logo.png
packages:
- name: gcp-tools
  type: bosh-release
  path: https://storage.googleapis.com/bosh-gcp/beta/gcp-tools-release/latest.tgz
  jobs:
  - name: google-fluentd
    templates:
    - name: google-fluentd
      release: bosh-gcp-tools
    - name: stackdriver-nozzle
      release: bosh-gcp-tools
    - name: stackdriver-agent
      release: bosh-gcp-tools
    - name: credentials
      release: bosh-gcp-tools
    memory: 512
    ephemeral_disk: 4096
    cpu: 2
    dynamic_ip: 0
    static_ip: 1
    properties:
      firehose:
        endpoint: .properties.firehose_endpoint
        events: .properties.firehose_events
        username: .properties.firehose_username
        password: .properties.firehose_password
        skip_ssl: .properties.firehose_skip_ssl
      credentials:
        application_default_credentials: .properties.service_account
      project_id: .properties.project_id
      heartbeat_rate: .properties.heartbeat_rate


forms:
- name: nozzle-config
  label: Nozzle Configuration
  description: Configure access properties for the Stackdriver Nozzle here
  properties:
  - name: firehose_endpoint
    type: string
    label: FireHose Endpoint
  - name: firehose_events
    type: string
    default: HttpStart,HttpStop,HttpStartStop,LogMessage,ValueMetric,CounterEvent,Error,ContainerMetric
    label: FireHose Events
  - name: firehose_username
    type: string
    label: FireHose Username
  - name: firehose_password
    type: secret
    label: FireHose Password
  - name: firehose_skip_ssl
    type: boolean
    default: true
    label: Skip SSL validation on FireHose Endpoint
  - name: service_account
    type: text
    label: Service Account Credentials
  - name: project_id
    type: string
    label: Google Project ID
  - name: heartbeat_rate
    type: integer
    label: Seconds between Heartbeats
